<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="LiveData Migrator Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="LiveData Migrator Blog Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="LiveData Migrator" href="/opensearch.xml"><title data-react-helmet="true">Configuring your environment for metadata migrations (preview) | LiveData Migrator</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Configuring your environment for metadata migrations (preview) | LiveData Migrator"><meta data-react-helmet="true" name="description" content="We recommend that you make the following configuration changes to your environment to prepare for metadata migrations."><meta data-react-helmet="true" property="og:description" content="We recommend that you make the following configuration changes to your environment to prepare for metadata migrations."><meta data-react-helmet="true" property="og:url" content="https://docs.wandisco.com/live-data-migrator//docs/configuration-metadata"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.png"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link data-react-helmet="true" rel="canonical" href="https://docs.wandisco.com/live-data-migrator//docs/configuration-metadata"><link rel="stylesheet" href="/styles.428b9bba.css">
<link rel="preload" href="/styles.99b2be3f.js" as="script">
<link rel="preload" href="/runtime~main.0f0c5633.js" as="script">
<link rel="preload" href="/main.5c3efcd0.js" as="script">
<link rel="preload" href="/1.3b4509c7.js" as="script">
<link rel="preload" href="/2.75438990.js" as="script">
<link rel="preload" href="/44.02f37bf8.js" as="script">
<link rel="preload" href="/47.e635bcf1.js" as="script">
<link rel="preload" href="/935f2afb.9e200091.js" as="script">
<link rel="preload" href="/17896441.43808fdd.js" as="script">
<link rel="preload" href="/bc28f2d0.f2101efd.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">WANdisco LiveData Migrator</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/about">Docs</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__item navbar__link" href="/docs/about">1.8.3 (latest)</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/configuration-metadata">1.8.3 (latest)</a></li><li><a class="dropdown__link" href="/docs/1.4.7/about">1.4.7</a></li></ul></div><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2N3Q"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_3NWk">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_3NWk">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><div class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></div></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">WANdisco LiveData Migrator</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/about">Docs</a></li><li class="menu__list-item"><a role="button" class="menu__link menu__link--sublist">Versions</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" href="/docs/configuration-metadata">1.8.3 (latest)</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/1.4.7/about">1.4.7</a></li></ul></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_vMrn"><div class="docSidebarContainer_3Ak5" role="complementary"><div class="sidebar_3gvy"><div class="menu menu--responsive thin-scrollbar menu_1yIk"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_1CUI" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">LiveData Migrator</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/about">Introduction</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Installation</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/prereqs">Prerequisites</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/installation">Install LiveData Migrator</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/license">Upgrade your license</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/uninstall">Uninstalling and upgrading</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/get-started">Get started</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Migrate data</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/configure-storage">Configure storage</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/create-migration">Create a migration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/configure-exclusions">Configure exclusions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/manage-migrations">Manage migrations</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/manage-bandwidth">Bandwidth management</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Migrate metadata</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/connect-metastores">Connect metastores</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/define-metadata-rules">Define metadata rules</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/migrate-metadata">Create a metadata migration</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Common use cases</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/uc-on-prem-hadoop-hdi">On-premises Hadoop to Azure HDI</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">Configuration</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/configuration-ldm">LiveData Migrator</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/configuration-ui">LiveData UI</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/configuration-metadata">Metadata migrations</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Reference</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/command-reference">Command Reference</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api-reference">API Reference</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/jar">LiveData Migrator Jar</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/troubleshooting">Troubleshooting</a></li></ul></li></ul></div></div></div><main class="docMainContainer_2iGs"><div class="container padding-vert--lg docItemWrapper_1bxp"><div class="row"><div class="col docItemCol_U38p"><div class="docItemContainer_a7m4"><article><div><span class="badge badge--secondary">Version: 1.8.3 (latest)</span></div><header><h1 class="docTitle_Oumm">Configuring your environment for metadata migrations (preview)</h1></header><div class="markdown"><p>We recommend that you make the following configuration changes to your environment to prepare for metadata migrations.</p><h2 id="enable-hive-metastore-event-listener">Enable Hive metastore event listener</h2><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>This recommendation is currently supported on HDP platforms only.</p></div></div><p>When deploying a <a href="/docs/command-reference#hive-agent-add-hive">hive agent for Apache Hive</a>, it is recommended to enable the standard <a href="https://hive.apache.org/javadocs/r2.3.7/api/org/apache/hive/hcatalog/listener/DbNotificationListener.html"><code>DBNotificationListener</code></a> listener for the Hive metastore. This allows a publisher-subscriber mechanism and dramatically reduces the load on the metastore after the initial scan of the metastore is complete.</p><ol><li><p>To enable it, add the following properties and values to the Apache Hive metastore&#x27;s <code>hive-site.xml</code>:</p><pre><code class="language-text">&lt;property&gt;
  &lt;name&gt;hive.metastore.event.listeners&lt;/name&gt;
  &lt;value&gt;org.apache.hive.hcatalog.listener.DbNotificationListener&lt;/value&gt;
&lt;/property&gt;
&lt;property&gt;
  &lt;name&gt;hive.metastore.event.db.listener.timetolive&lt;/name&gt;
  &lt;value&gt;86400s&lt;/value&gt;
&lt;/property&gt;
</code></pre><p>A restart of the Hive metastore services is required for the changes to take effect.</p></li><li><p>LiveData Migrator will rescan its configuration at the start of a migration, and auto-detects the presence of the <code>DbNotificationListener</code>.</p><p>As such, all running metadata migrations should be stopped and started.</p><pre><code class="language-text" metastring="title=&quot;Stop all metadata migrations through the CLI&quot;" title="&quot;Stop">hive migration stop --all
</code></pre><pre><code class="language-text" metastring="title=&quot;Start all metadata migrations through the CLI&quot;" title="&quot;Start">hive migration start --all
</code></pre><p>Any new migrations will auto-detect the presence of the listener straight away.</p></li><li><p>Confirm that migrations are now using the listener by checking the status of a hive migration:</p><pre><code class="language-text" metastring="title=&quot;Example status command&quot;" title="&quot;Example">hive migration status --name hivemigration1
</code></pre><pre><code class="language-text" metastring="title=&quot;Example output&quot;" title="&quot;Example">{
  &quot;migrationName&quot;: &quot;hivemigration1&quot;,
  &quot;migratedRules&quot;: [
    {
      &quot;name&quot;: &quot;test&quot;,
      &quot;dbNamePattern&quot;: &quot;test*&quot;,
      &quot;tableNamePattern&quot;: &quot;test*&quot;
    }
  ],
  &quot;discoveredItems&quot;: 2752,
  &quot;migratedItems&quot;: 50,
  &quot;state&quot;: &quot;RUNNING&quot;,
  &quot;upToDate&quot;: true,
  &quot;description&quot;: &quot;Listening to events...&quot;
}
</code></pre><p>The description should state <code>&quot;Listening to events...&quot;</code>.</p></li></ol><h2 id="default-hive-metastore-warehouse-directory">Default Hive metastore warehouse directory</h2><p>When deploying a hive agent for a HDInsights cluster (which can either be <a href="/docs/command-reference#hive-agent-add-azure">Azure SQL</a> or remote <a href="/docs/command-reference#hive-agent-add-hive">Apache Hive</a>), the default hive warehouse directory will be as follows:</p><p><code>hive.metastore.warehouse.dir=/hive/warehouse</code></p><p>This is different from the majority of Hadoop clusters, as such, it may be necessary to adjust this property in your HDInsights cluster so that it is the same as your source environment.</p><p>Doing so will allow you to start using your source data and metadata on your HDInsights cluster immediately after migration, as it will be referenced correctly by your target metastore/database.</p></div></article><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/configuration-ui"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Configuring the LiveData UI</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/command-reference"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Command Reference Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_2xL- thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#enable-hive-metastore-event-listener" class="table-of-contents__link">Enable Hive metastore event listener</a></li><li><a href="#default-hive-metastore-warehouse-directory" class="table-of-contents__link">Default Hive metastore warehouse directory</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 WANdisco Inc.</div></div></div></footer></div>
<script src="/styles.99b2be3f.js"></script>
<script src="/runtime~main.0f0c5633.js"></script>
<script src="/main.5c3efcd0.js"></script>
<script src="/1.3b4509c7.js"></script>
<script src="/2.75438990.js"></script>
<script src="/44.02f37bf8.js"></script>
<script src="/47.e635bcf1.js"></script>
<script src="/935f2afb.9e200091.js"></script>
<script src="/17896441.43808fdd.js"></script>
<script src="/bc28f2d0.f2101efd.js"></script>
</body>
</html>