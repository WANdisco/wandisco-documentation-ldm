(window.webpackJsonp=window.webpackJsonp||[]).push([[111],{182:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return c})),a.d(t,"metadata",(function(){return i})),a.d(t,"toc",(function(){return s})),a.d(t,"default",(function(){return m}));var n=a(3),r=a(7),o=(a(0),a(237)),c={id:"uc-on-prem-hadoop-aws-s3-glue",title:"On-premises Hadoop to Amazon S3 and AWS Glue",sidebar_label:"On-premises Hadoop to Amazon S3 & AWS Glue"},i={unversionedId:"uc-on-prem-hadoop-aws-s3-glue",id:"version-1.12.0/uc-on-prem-hadoop-aws-s3-glue",isDocsHomePage:!1,title:"On-premises Hadoop to Amazon S3 and AWS Glue",description:"These are an outline of the steps needed to ready your environment for migration of data and metadata.",source:"@site/versioned_docs/version-1.12.0/uc-on-prem-hadoop-aws-s3-glue.md",slug:"/uc-on-prem-hadoop-aws-s3-glue",permalink:"/wandisco-documentation-ldm/docs/1.12.0/uc-on-prem-hadoop-aws-s3-glue",version:"1.12.0",sidebar_label:"On-premises Hadoop to Amazon S3 & AWS Glue",sidebar:"version-1.12.0/someSidebar",previous:{title:"On-premises Hadoop to Azure HDInsights",permalink:"/wandisco-documentation-ldm/docs/1.12.0/uc-on-prem-hadoop-hdi"},next:{title:"Configuring LiveData Migrator",permalink:"/wandisco-documentation-ldm/docs/1.12.0/configuration-ldm"}},s=[{value:"Recommended technical knowledge",id:"recommended-technical-knowledge",children:[]},{value:"Prerequisites",id:"prerequisites",children:[{value:"On-premises Hadoop cluster",id:"on-premises-hadoop-cluster",children:[]},{value:"Amazon S3 and AWS Glue",id:"amazon-s3-and-aws-glue",children:[]},{value:"AWS security",id:"aws-security",children:[]},{value:"AWS deployment",id:"aws-deployment",children:[]},{value:"AWS costs and quotas",id:"aws-costs-and-quotas",children:[]}]},{value:"Install LiveData Migrator on your Hadoop edge node",id:"install-livedata-migrator-on-your-hadoop-edge-node",children:[]},{value:"Configure for data migrations",id:"configure-for-data-migrations",children:[{value:"Add HDFS as source filesystem",id:"add-hdfs-as-source-filesystem",children:[]},{value:"Add Amazon S3 bucket as target filesystem",id:"add-amazon-s3-bucket-as-target-filesystem",children:[]},{value:"Test the S3 bucket target",id:"test-the-s3-bucket-target",children:[]}]},{value:"Create path mappings (optional)",id:"create-path-mappings-optional",children:[]},{value:"Configure for metadata migrations",id:"configure-for-metadata-migrations",children:[{value:"Add Apache Hive as source hive agent",id:"add-apache-hive-as-source-hive-agent",children:[]},{value:"Test the Apache Hive source hive agent",id:"test-the-apache-hive-source-hive-agent",children:[]},{value:"Add AWS Glue as target hive agent",id:"add-aws-glue-as-target-hive-agent",children:[]},{value:"Test the AWS Glue target hive agent",id:"test-the-aws-glue-target-hive-agent",children:[]}]},{value:"Troubleshooting",id:"troubleshooting",children:[]},{value:"Network architecture",id:"network-architecture",children:[{value:"On-Premises",id:"on-premises",children:[]},{value:"AWS Cloud",id:"aws-cloud",children:[]}]},{value:"Next Steps",id:"next-steps",children:[]}],l={toc:s};function m(e){var t=e.components,c=Object(r.a)(e,["components"]);return Object(o.b)("wrapper",Object(n.a)({},l,c,{components:t,mdxType:"MDXLayout"}),Object(o.b)("p",null,"These are an outline of the steps needed to ready your environment for migration of data and metadata."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Time to complete:")," 1 hour (assuming all prerequisites are met)."),Object(o.b)("h2",{id:"recommended-technical-knowledge"},"Recommended technical knowledge"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Linux operating system"),Object(o.b)("li",{parentName:"ul"},"Apache Hadoop administration",Object(o.b)("ul",{parentName:"li"},Object(o.b)("li",{parentName:"ul"},"Hadoop Distributed Filesystem (HDFS)"),Object(o.b)("li",{parentName:"ul"},"Apache Hive"))),Object(o.b)("li",{parentName:"ul"},"Amazon Web Services (AWS) Service configuration and management",Object(o.b)("ul",{parentName:"li"},Object(o.b)("li",{parentName:"ul"},"Amazon Simple Storage Service (Amazon S3)"),Object(o.b)("li",{parentName:"ul"},"AWS Glue")))),Object(o.b)("h2",{id:"prerequisites"},"Prerequisites"),Object(o.b)("h3",{id:"on-premises-hadoop-cluster"},"On-premises Hadoop cluster"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"All ",Object(o.b)("a",{parentName:"p",href:"/wandisco-documentation-ldm/docs/1.12.0/prereqs#prerequisites"},"prerequisites")," are met for the source environment.")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"Network connectivity between your edge node and ",Object(o.b)("a",{parentName:"p",href:"https://docs.aws.amazon.com/general/latest/gr/s3.html"},"Amazon S3")," & ",Object(o.b)("a",{parentName:"p",href:"https://docs.aws.amazon.com/general/latest/gr/glue.html"},"AWS Glue"),". These are some of the options available depending on your use-case:"),Object(o.b)("ul",{parentName:"li"},Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",{parentName:"li",href:"https://docs.aws.amazon.com/vpn/latest/s2svpn/VPC_VPN.html"},"AWS Site-to-Site VPN")," - suitable for small/medium/test migrations."),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",{parentName:"li",href:"https://docs.aws.amazon.com/directconnect/latest/UserGuide/Welcome.html"},"AWS Direct Connect")," - suitable for larger migrations (up to 100Gbps).")),Object(o.b)("p",{parentName:"li"},"Ensure that all security best practices are taken into consideration when setting up either ",Object(o.b)("a",{parentName:"p",href:"https://docs.aws.amazon.com/vpn/latest/s2svpn/security.html"},"Site-to-Site")," or ",Object(o.b)("a",{parentName:"p",href:"https://docs.aws.amazon.com/directconnect/latest/UserGuide/security.html"},"Direct Connect"),"."))),Object(o.b)("h3",{id:"amazon-s3-and-aws-glue"},"Amazon S3 and AWS Glue"),Object(o.b)("p",null,"For your target environment, make sure you have the following:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"An ",Object(o.b)("a",{parentName:"li",href:"https://aws.amazon.com/account/"},"AWS account"),"."),Object(o.b)("li",{parentName:"ul"},"An ",Object(o.b)("a",{parentName:"li",href:"https://docs.aws.amazon.com/AmazonS3/latest/userguide/GetStartedWithS3.html"},"Amazon S3 bucket"),"."),Object(o.b)("li",{parentName:"ul"},"An ",Object(o.b)("a",{parentName:"li",href:"https://docs.aws.amazon.com/glue/latest/dg/what-is-glue.html"},"AWS Glue Data Catalog")," instance.",Object(o.b)("ul",{parentName:"li"},Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",{parentName:"li",href:"https://docs.aws.amazon.com/glue/latest/dg/start-connecting.html"},"Internal network configuration between AWS Glue and Amazon S3")," including ",Object(o.b)("a",{parentName:"li",href:"https://docs.aws.amazon.com/glue/latest/dg/set-up-vpc-dns.html"},"DNS configuration for your VPC"),"."),Object(o.b)("li",{parentName:"ul"},"An ",Object(o.b)("a",{parentName:"li",href:"https://docs.aws.amazon.com/glue/latest/dg/console-connections.html"},"AWS Glue connection"),"."),Object(o.b)("li",{parentName:"ul"},"If applicable, an ",Object(o.b)("a",{parentName:"li",href:"https://docs.aws.amazon.com/glue/latest/dg/crawler-data-stores.html"},"AWS Glue crawler")," configured to crawl your Amazon S3 bucket.")))),Object(o.b)("h3",{id:"aws-security"},"AWS security"),Object(o.b)("p",null,"All AWS services should be secured using best practices. This is a summary of those practices and which services they apply to."),Object(o.b)("h4",{id:"amazon-s3"},"Amazon S3"),Object(o.b)("p",null,"All Amazon S3 buckets should adhere to ",Object(o.b)("a",{parentName:"p",href:"https://docs.aws.amazon.com/AmazonS3/latest/userguide/security-best-practices.html"},"AWS best practices for Amazon S3"),". These include the following:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"Use ",Object(o.b)("a",{parentName:"p",href:"https://docs.aws.amazon.com/IAM/latest/UserGuide/introduction.html"},"IAM")," to grant access to Amazon S3 buckets.")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"Follow ",Object(o.b)("a",{parentName:"p",href:"https://docs.aws.amazon.com/IAM/latest/UserGuide/best-practices.html"},"IAM security best practices")," when creating policies."),Object(o.b)("ul",{parentName:"li"},Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",{parentName:"li",href:"https://docs.aws.amazon.com/IAM/latest/UserGuide/best-practices.html#create-iam-users"},"Create an individual IAM user/role")," for access to the bucket (don't use the AWS root account)."),Object(o.b)("li",{parentName:"ul"},"Follow the policy of ",Object(o.b)("a",{parentName:"li",href:"https://docs.aws.amazon.com/IAM/latest/UserGuide/best-practices.html#grant-least-privilege"},"least privilege")," to grant read and write access to the bucket for LiveData Migrator. This includes limiting access through ",Object(o.b)("a",{parentName:"li",href:"https://docs.aws.amazon.com/AmazonS3/latest/userguide/using-iam-policies.html"},"bucket policies")," and ",Object(o.b)("a",{parentName:"li",href:"https://docs.aws.amazon.com/AmazonS3/latest/userguide/acl-overview.html"},"access control lists"),"."),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",{parentName:"li",href:"https://docs.aws.amazon.com/IAM/latest/UserGuide/access_controlling.html"},"Limit the IAM policy")," to the minimal rules required for LiveData Migrator operations on the bucket:",Object(o.b)("ul",{parentName:"li"},Object(o.b)("li",{parentName:"ul"},"List available buckets"),Object(o.b)("li",{parentName:"ul"},"Obtain bucket location"),Object(o.b)("li",{parentName:"ul"},"List bucket objects"),Object(o.b)("li",{parentName:"ul"},"Put, delete or retrieve objects from the bucket."))))),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},Object(o.b)("a",{parentName:"p",href:"https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_access-keys.html"},"IAM Access and Secret Keys")," are supported if your are unable to use IAM Roles."),Object(o.b)("ul",{parentName:"li"},Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"Use ",Object(o.b)("a",{parentName:"p",href:"/wandisco-documentation-ldm/docs/1.12.0/command-reference#filesystem-update-s3a"},Object(o.b)("inlineCode",{parentName:"a"},"filesystem update s3a"))," when ",Object(o.b)("a",{parentName:"p",href:"https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_access-keys.html#Using_RotateAccessKey"},"rotating access keys")," to update LiveData Migrator with the new key IDs.")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"The access and secret keys can be stored or referenced in a location used by the ",Object(o.b)("a",{parentName:"p",href:"https://docs.aws.amazon.com/sdk-for-java/v1/developer-guide/credentials.html#credentials-default"},"DefaultAWSCredentialsProviderChain"),". This class can be defined when using the ",Object(o.b)("a",{parentName:"p",href:"/wandisco-documentation-ldm/docs/1.12.0/command-reference#s3a-mandatory-parameters"},Object(o.b)("inlineCode",{parentName:"a"},"--credentials-provider"))," option."),Object(o.b)("p",{parentName:"li"},"If using the ",Object(o.b)("a",{parentName:"p",href:"https://hadoop.apache.org/docs/current/hadoop-aws/tools/hadoop-aws/index.html#Simple_name.2Fsecret_credentials_with_SimpleAWSCredentialsProvider.2A"},"SimpleAWSCredentialsProvider")," class, the access and secret keys will be stored in the LiveData Migrator database.")))),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},Object(o.b)("a",{parentName:"p",href:"https://docs.aws.amazon.com/AmazonS3/latest/userguide/bucket-encryption.html"},"Enable server-side encryption")," for your Amazon S3 bucket.")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},Object(o.b)("a",{parentName:"p",href:"https://docs.aws.amazon.com/AmazonS3/latest/userguide/access-control-block-public-access.html"},"Block public access")," to the Amazon S3 bucket unless you explicitly require it."))),Object(o.b)("h4",{id:"aws-glue"},"AWS Glue"),Object(o.b)("p",null,"All AWS Glue instances should be configured using ",Object(o.b)("a",{parentName:"p",href:"https://docs.aws.amazon.com/glue/latest/dg/security.html"},"AWS security practices for Glue"),". These include the following:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"Set up ",Object(o.b)("a",{parentName:"p",href:"https://docs.aws.amazon.com/glue/latest/dg/getting-started-access.html"},"IAM permissions")," for LiveData Migrator to access AWS Glue, including:"),Object(o.b)("ul",{parentName:"li"},Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",{parentName:"li",href:"https://docs.aws.amazon.com/glue/latest/dg/create-service-policy.html"},"Create an IAM policy for the AWS Glue service"),"."),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",{parentName:"li",href:"https://docs.aws.amazon.com/glue/latest/dg/create-an-iam-role.html"},"Create an IAM role for AWS Glue"),"."),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",{parentName:"li",href:"https://docs.aws.amazon.com/glue/latest/dg/attach-policy-iam-user.html"},"Attach a policy to the IAM user to allow access to AWS Glue"),"."))),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},Object(o.b)("a",{parentName:"p",href:"https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_access-keys.html"},"IAM Access and Secret Keys")," are supported if your are unable to use IAM Roles."),Object(o.b)("ul",{parentName:"li"},Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"Use ",Object(o.b)("a",{parentName:"p",href:"/wandisco-documentation-ldm/docs/1.12.0/command-reference#hive-agent-configure-glue"},Object(o.b)("inlineCode",{parentName:"a"},"hive agent configure glue"))," when ",Object(o.b)("a",{parentName:"p",href:"https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_access-keys.html#Using_RotateAccessKey"},"rotating access keys")," to update the LiveData Migrator metadata service with the new key IDs.")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"The access and secret keys can be stored or referenced in a location used by the ",Object(o.b)("a",{parentName:"p",href:"https://docs.aws.amazon.com/sdk-for-java/v1/developer-guide/credentials.html#credentials-default"},"DefaultAWSCredentialsProviderChain"),". This class is the default when not using the ",Object(o.b)("a",{parentName:"p",href:"/wandisco-documentation-ldm/docs/1.12.0/command-reference#glue-credential-parameters"},Object(o.b)("inlineCode",{parentName:"a"},"--credentials-provider"))," option."),Object(o.b)("p",{parentName:"li"},"If specifying the ",Object(o.b)("a",{parentName:"p",href:"https://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/index.html?com/amazonaws/auth/AWSStaticCredentialsProvider.html"},"StaticCredentialsProviderFactory")," class, the access and secret keys will be stored in the LiveData Migrator metadata service database.")))),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},Object(o.b)("a",{parentName:"p",href:"https://docs.aws.amazon.com/glue/latest/dg/set-up-encryption.html"},"Enable encryption in AWS Glue"),"."))),Object(o.b)("h3",{id:"aws-deployment"},"AWS deployment"),Object(o.b)("p",null,"These are some of the options to consider before creating your Amazon S3 bucket and AWS Glue instance:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},Object(o.b)("a",{parentName:"p",href:"https://docs.amazonaws.cn/en_us/AmazonS3/latest/userguide/storage-class-intro.html"},"Amazon S3 storage class"))),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},Object(o.b)("a",{parentName:"p",href:"https://docs.amazonaws.cn/en_us/AmazonS3/latest/userguide/object-lifecycle-mgmt.html"},"Amazon S3 lifecycle policy"))),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},Object(o.b)("a",{parentName:"p",href:"https://aws.amazon.com/blogs/big-data/create-cross-account-and-cross-region-aws-glue-connections/"},"AWS Glue cross-account and cross-region"))),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},Object(o.b)("a",{parentName:"p",href:"https://docs.aws.amazon.com/glue/latest/dg/disaster-recovery-resiliency.html"},"AWS Glue resilience")))),Object(o.b)("h3",{id:"aws-costs-and-quotas"},"AWS costs and quotas"),Object(o.b)("p",null,"The following table lists the required and optional AWS services that are applicable to this use-case:"),Object(o.b)("table",null,Object(o.b)("thead",{parentName:"table"},Object(o.b)("tr",{parentName:"thead"},Object(o.b)("th",{parentName:"tr",align:null},"Service"),Object(o.b)("th",{parentName:"tr",align:null},"Required?"),Object(o.b)("th",{parentName:"tr",align:null},"Pricing"),Object(o.b)("th",{parentName:"tr",align:null},"Quotas"))),Object(o.b)("tbody",{parentName:"table"},Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},"Amazon S3"),Object(o.b)("td",{parentName:"tr",align:null},Object(o.b)("strong",{parentName:"td"},"Yes")),Object(o.b)("td",{parentName:"tr",align:null},Object(o.b)("a",{parentName:"td",href:"https://aws.amazon.com/s3/pricing/"},"Amazon S3 pricing")),Object(o.b)("td",{parentName:"tr",align:null},Object(o.b)("a",{parentName:"td",href:"https://docs.aws.amazon.com/general/latest/gr/s3.html#limits_s3"},"Amazon S3 quotas"))),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},"AWS Glue"),Object(o.b)("td",{parentName:"tr",align:null},Object(o.b)("strong",{parentName:"td"},"Yes")),Object(o.b)("td",{parentName:"tr",align:null},Object(o.b)("a",{parentName:"td",href:"https://aws.amazon.com/glue/pricing/"},"AWS Glue pricing")),Object(o.b)("td",{parentName:"tr",align:null},Object(o.b)("a",{parentName:"td",href:"https://docs.aws.amazon.com/general/latest/gr/glue.html#limits_glue"},"AWS Glue quotas"))),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},"Site-to-Site VPN"),Object(o.b)("td",{parentName:"tr",align:null},"Optional"),Object(o.b)("td",{parentName:"tr",align:null},Object(o.b)("a",{parentName:"td",href:"https://aws.amazon.com/vpn/pricing/"},"Site-to-Site VPN pricing")),Object(o.b)("td",{parentName:"tr",align:null},Object(o.b)("a",{parentName:"td",href:"https://docs.aws.amazon.com/vpn/latest/s2svpn/vpn-limits.html"},"Site-to-Site VPN quotas"))),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},"Direct Connect"),Object(o.b)("td",{parentName:"tr",align:null},"Optional"),Object(o.b)("td",{parentName:"tr",align:null},Object(o.b)("a",{parentName:"td",href:"https://aws.amazon.com/directconnect/pricing/"},"Direct Connect pricing")),Object(o.b)("td",{parentName:"tr",align:null},Object(o.b)("a",{parentName:"td",href:"https://docs.aws.amazon.com/directconnect/latest/UserGuide/limits.html"},"Direct Connect quotas"))),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},"Key Management Service (KMS)"),Object(o.b)("td",{parentName:"tr",align:null},"Optional"),Object(o.b)("td",{parentName:"tr",align:null},Object(o.b)("a",{parentName:"td",href:"https://aws.amazon.com/kms/pricing/"},"KMS pricing")),Object(o.b)("td",{parentName:"tr",align:null},Object(o.b)("a",{parentName:"td",href:"https://docs.aws.amazon.com/kms/latest/developerguide/limits.html"},"KMS quotas"))))),Object(o.b)("p",null,"See ",Object(o.b)("a",{parentName:"p",href:"https://aws.amazon.com/pricing/"},"AWS pricing")," for more general guidance."),Object(o.b)("h2",{id:"install-livedata-migrator-on-your-hadoop-edge-node"},"Install LiveData Migrator on your Hadoop edge node"),Object(o.b)("p",null,Object(o.b)("a",{parentName:"p",href:"/wandisco-documentation-ldm/docs/1.12.0/installation#download-and-install-livedata-migrator"},"Download and install")," LiveData Migrator on your Hadoop edge node."),Object(o.b)("h2",{id:"configure-for-data-migrations"},"Configure for data migrations"),Object(o.b)("h3",{id:"add-hdfs-as-source-filesystem"},"Add HDFS as source filesystem"),Object(o.b)("ol",null,Object(o.b)("li",{parentName:"ol"},Object(o.b)("p",{parentName:"li"},"Configure your on-premises HDFS as the source filesystem:"),Object(o.b)("ul",{parentName:"li"},Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",{parentName:"li",href:"/wandisco-documentation-ldm/docs/1.12.0/configure-storage#configure-source-storage"},"UI")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",{parentName:"li",href:"/wandisco-documentation-ldm/docs/1.12.0/command-reference#filesystem-auto-discover-source-hdfs"},"CLI")))),Object(o.b)("li",{parentName:"ol"},Object(o.b)("p",{parentName:"li"},Object(o.b)("em",{parentName:"p"},"(CLI only)")," Validate that your on-premises HDFS is now set as your source filesystem:"),Object(o.b)("p",{parentName:"li"},Object(o.b)("a",{parentName:"p",href:"/wandisco-documentation-ldm/docs/1.12.0/command-reference#source-fs-show"},Object(o.b)("inlineCode",{parentName:"a"},"source fs show"))),Object(o.b)("p",{parentName:"li"},"If the filesystem shown is incorrect, delete it using ",Object(o.b)("a",{parentName:"p",href:"/wandisco-documentation-ldm/docs/1.12.0/command-reference#source-del"},Object(o.b)("inlineCode",{parentName:"a"},"source del"))," and configure the source manually:"),Object(o.b)("p",{parentName:"li"},Object(o.b)("a",{parentName:"p",href:"/wandisco-documentation-ldm/docs/1.12.0/command-reference#filesystem-add-hdfs"},Object(o.b)("inlineCode",{parentName:"a"},"filesystem add hdfs"))),Object(o.b)("p",{parentName:"li"},"Ensure to include the ",Object(o.b)("inlineCode",{parentName:"p"},"--source")," parameter when using the command above."))),Object(o.b)("h3",{id:"add-amazon-s3-bucket-as-target-filesystem"},"Add Amazon S3 bucket as target filesystem"),Object(o.b)("p",null,"Configure your Amazon S3 bucket as your target filesystem:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",{parentName:"li",href:"/wandisco-documentation-ldm/docs/1.12.0/configure-storage#add-target-storages"},"UI")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",{parentName:"li",href:"/wandisco-documentation-ldm/docs/1.12.0/command-reference#filesystem-add-s3a"},"CLI"))),Object(o.b)("p",null,"You may then ",Object(o.b)("a",{parentName:"p",href:"#test-target-filesystem"},"test your target filesystem"),"."),Object(o.b)("h3",{id:"test-the-s3-bucket-target"},"Test the S3 bucket target"),Object(o.b)("p",null,"LiveData Migrator automatically tests the connection to any target filesystem added to ensure the details provided are valid and a migration can be created and run."),Object(o.b)("p",null,"To check that the configuration for the filesystem is correct:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"UI - the target will show a healthy connection.")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"CLI - the ",Object(o.b)("inlineCode",{parentName:"p"},"filesystem show")," command will show only a target that was successfully added:"),Object(o.b)("pre",{parentName:"li"},Object(o.b)("code",{parentName:"pre",className:"language-text",metastring:'title="Example"',title:'"Example"'},"filesystem show --file-system-id myAWSBucket\n")))),Object(o.b)("p",null,"To test a migration to the S3 bucket, ",Object(o.b)("a",{parentName:"p",href:"/wandisco-documentation-ldm/docs/1.12.0/create-migration"},"create a migration")," and run it to transfer data, then check that the data has arrived in its intended destination."),Object(o.b)("h2",{id:"create-path-mappings-optional"},"Create path mappings (optional)"),Object(o.b)("p",null,Object(o.b)("a",{parentName:"p",href:"/wandisco-documentation-ldm/docs/1.12.0/create-path-mappings"},"Create path mappings")," to ensure that data for managed Hive databases and tables are migrated to an appropriate ",Object(o.b)("a",{parentName:"p",href:"https://docs.aws.amazon.com/AmazonS3/latest/userguide/using-folders.html"},"folder location on your Amazon S3 bucket"),"."),Object(o.b)("p",null,"This lets you start using your source data and metadata immediately after migration, as it will be referenced correctly by your ",Object(o.b)("a",{parentName:"p",href:"https://docs.aws.amazon.com/glue/latest/dg/add-crawler.html"},"AWS Glue crawler")," and/or ",Object(o.b)("a",{parentName:"p",href:"https://docs.aws.amazon.com/glue/latest/ug/edit-jobs-source-s3-files.html"},"AWS Glue Studio"),"."),Object(o.b)("h2",{id:"configure-for-metadata-migrations"},"Configure for metadata migrations"),Object(o.b)("h3",{id:"add-apache-hive-as-source-hive-agent"},"Add Apache Hive as source hive agent"),Object(o.b)("ol",null,Object(o.b)("li",{parentName:"ol"},Object(o.b)("p",{parentName:"li"},"(Recommended) ",Object(o.b)("a",{parentName:"p",href:"/wandisco-documentation-ldm/docs/1.12.0/configuration-metadata#enable-hive-metastore-event-listener"},"Enable the Hive metastore event listener")," on the on-premises Hadoop cluster.")),Object(o.b)("li",{parentName:"ol"},Object(o.b)("p",{parentName:"li"},"Configure the source hive agent to connect to the Hive metastore on the on-premises Hadoop cluster:"),Object(o.b)("ul",{parentName:"li"},Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",{parentName:"li",href:"/wandisco-documentation-ldm/docs/1.12.0/connect-metastores#add-source-agent"},"UI")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",{parentName:"li",href:"/wandisco-documentation-ldm/docs/1.12.0/command-reference#hive-agent-add-hive"},"CLI"))))),Object(o.b)("h3",{id:"test-the-apache-hive-source-hive-agent"},"Test the Apache Hive source hive agent"),Object(o.b)("p",null,"LiveData Migrator automatically tests the connection to any hive agent added to ensure the details provided are valid and a metadata migration can be created and run."),Object(o.b)("p",null,"To check that the configuration for the hive agent is correct:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"UI - the agent will show a healthy connection.")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"CLI"),Object(o.b)("pre",{parentName:"li"},Object(o.b)("code",{parentName:"pre",className:"language-text",metastring:'title="Example"',title:'"Example"'},"hive agent check --name hiveAgent\n")))),Object(o.b)("p",null,"To test a metadata migration from the Apache Hive agent, ",Object(o.b)("a",{parentName:"p",href:"/wandisco-documentation-ldm/docs/1.12.0/migrate-metadata"},"create a metadata migration")," and run it to transfer data, then check that the data has arrived in its intended destination."),Object(o.b)("h3",{id:"add-aws-glue-as-target-hive-agent"},"Add AWS Glue as target hive agent"),Object(o.b)("p",null,"Configure a hive agent to connect to AWS Glue:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",{parentName:"li",href:"/wandisco-documentation-ldm/docs/1.12.0/connect-metastores#add-target-agents"},"UI")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",{parentName:"li",href:"/wandisco-documentation-ldm/docs/1.12.0/command-reference#hive-agent-add-glue"},"CLI"))),Object(o.b)("h3",{id:"test-the-aws-glue-target-hive-agent"},"Test the AWS Glue target hive agent"),Object(o.b)("p",null,"LiveData Migrator automatically tests the connection to any hive agent added to ensure the details provided are valid and a metadata migration can be created and run."),Object(o.b)("p",null,"To check that the configuration for the hive agent is correct:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"UI - the agent will show a healthy connection.")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"CLI"),Object(o.b)("pre",{parentName:"li"},Object(o.b)("code",{parentName:"pre",className:"language-text",metastring:'title="Example"',title:'"Example"'},"hive agent check --name hiveAgent\n")))),Object(o.b)("p",null,"To test a metadata migration to the AWS Glue target agent, ",Object(o.b)("a",{parentName:"p",href:"/wandisco-documentation-ldm/docs/1.12.0/migrate-metadata"},"create a metadata migration")," and run it to transfer data, then check that the data has arrived in its intended destination."),Object(o.b)("h2",{id:"troubleshooting"},"Troubleshooting"),Object(o.b)("p",null,"In the event a filesystem or hive agent could not be added, LiveData Migrator will provide you with error messages in most cases to help you discern the issue."),Object(o.b)("p",null,"If no data appears to have been transferred in either a migration or a metadata migration, check LiveData Migrator's notifications for errors. In most cases, these will provide you with the information you need to diagnose any problems."),Object(o.b)("p",null,"In the event of a problem you cannot diagnose, contact ",Object(o.b)("a",{parentName:"p",href:"https://community.wandisco.com/portal/s/"},"WANdisco support"),"."),Object(o.b)("h2",{id:"network-architecture"},"Network architecture"),Object(o.b)("p",null,Object(o.b)("img",{alt:"LiveData Migrator Network Architecture",src:a(254).default})),Object(o.b)("p",null,"The diagram is an example of LiveData Migrator architecture between two environments - On-premises and AWS Cloud."),Object(o.b)("h3",{id:"on-premises"},"On-Premises"),Object(o.b)("ol",null,Object(o.b)("li",{parentName:"ol"},Object(o.b)("p",{parentName:"li"},"All migration activity, both reads and writes, goes through the LiveData Migrator service. Data transfer to AWS is via Port 443 (HTTPS). Metadata transfer through the HiveMigrator functionality is over port 6780/6781 (HTTP/HTTPS).")),Object(o.b)("li",{parentName:"ol"},Object(o.b)("p",{parentName:"li"},"Interaction with LiveData Migrator is handled either through WANdisco's LiveData UI component (port 8081) or LiveData Migrator CLI (via LDM's API port 18080). The LDM CLI does not open any ports itself and acts as a client."))),Object(o.b)("h3",{id:"aws-cloud"},"AWS Cloud"),Object(o.b)("ol",null,Object(o.b)("li",{parentName:"ol"},Object(o.b)("p",{parentName:"li"},"The WAN connection to AWS from the source environment (see ",Object(o.b)("a",{parentName:"p",href:"https://docs.aws.amazon.com/vpn/latest/s2svpn/VPC_VPN.html"},"AWS Site-to-Site VPN")," and ",Object(o.b)("a",{parentName:"p",href:"https://docs.aws.amazon.com/directconnect/latest/UserGuide/Welcome.html"},"AWS Direct Connect"),").")),Object(o.b)("li",{parentName:"ol"},Object(o.b)("p",{parentName:"li"},"A VPC and Subnet (see ",Object(o.b)("a",{parentName:"p",href:"https://docs.aws.amazon.com/vpc/latest/userguide/working-with-vpcs.html"},"Working with VPCs and subnets"),") that are configured with access to the underlying storage and metastore and necessary external connectivity to the source environment.")),Object(o.b)("li",{parentName:"ol"},Object(o.b)("p",{parentName:"li"},"The ",Object(o.b)("a",{parentName:"p",href:"https://docs.aws.amazon.com/IAM/latest/UserGuide/introduction.html"},"IAM")," role and associated permissions for access to resources.")),Object(o.b)("li",{parentName:"ol"},Object(o.b)("p",{parentName:"li"},"The underlying storage (",Object(o.b)("a",{parentName:"p",href:"https://docs.aws.amazon.com/AmazonS3/latest/userguide/GetStartedWithS3.html"},"Amazon S3 bucket"),") and metastore (",Object(o.b)("a",{parentName:"p",href:"https://docs.aws.amazon.com/glue/latest/dg/populate-data-catalog.html"},"AWS Glue Data Catalog"),")."),Object(o.b)("div",{parentName:"li",className:"admonition admonition-important alert alert--info"},Object(o.b)("div",{parentName:"div",className:"admonition-heading"},Object(o.b)("h5",{parentName:"div"},Object(o.b)("span",{parentName:"h5",className:"admonition-icon"},Object(o.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(o.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"important")),Object(o.b)("div",{parentName:"div",className:"admonition-content"},Object(o.b)("p",{parentName:"div"},"By default, S3 buckets are set as private to prevent unauthorized access. We strongly recommend that you read the following blog on the AWS support site for a good overview of this subject:",Object(o.b)("br",{parentName:"p"}),"\n",Object(o.b)("a",{parentName:"p",href:"https://aws.amazon.com/blogs/database/best-practices-for-securing-sensitive-data-in-aws-data-stores/"},"Best practices for securing sensitive data in AWS data stores"))))),Object(o.b)("li",{parentName:"ol"},Object(o.b)("p",{parentName:"li"},"The ",Object(o.b)("a",{parentName:"p",href:"https://docs.aws.amazon.com/kms/latest/developerguide/overview.html"},"AWS Key Management Service")," configured to encrypt both the Amazon S3 bucket and AWS Glue instance."))),Object(o.b)("h2",{id:"next-steps"},"Next Steps"),Object(o.b)("p",null,"Start ",Object(o.b)("a",{parentName:"p",href:"/wandisco-documentation-ldm/docs/1.12.0/configure-exclusions"},"defining exclusions")," and ",Object(o.b)("a",{parentName:"p",href:"/wandisco-documentation-ldm/docs/1.12.0/create-migration"},"migrating data"),". You can also ",Object(o.b)("a",{parentName:"p",href:"/wandisco-documentation-ldm/docs/1.12.0/define-metadata-rules"},"create metadata rules")," and start ",Object(o.b)("a",{parentName:"p",href:"/wandisco-documentation-ldm/docs/1.12.0/migrate-metadata"},"migrating metadata"),"."))}m.isMDXComponent=!0},237:function(e,t,a){"use strict";a.d(t,"a",(function(){return b})),a.d(t,"b",(function(){return u}));var n=a(0),r=a.n(n);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var l=r.a.createContext({}),m=function(e){var t=r.a.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},b=function(e){var t=m(e.components);return r.a.createElement(l.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},p=r.a.forwardRef((function(e,t){var a=e.components,n=e.mdxType,o=e.originalType,c=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),b=m(a),p=n,u=b["".concat(c,".").concat(p)]||b[p]||d[p]||o;return a?r.a.createElement(u,i(i({ref:t},l),{},{components:a})):r.a.createElement(u,i({ref:t},l))}));function u(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var o=a.length,c=new Array(o);c[0]=p;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i.mdxType="string"==typeof e?e:n,c[1]=i;for(var l=2;l<o;l++)c[l]=a[l];return r.a.createElement.apply(null,c)}return r.a.createElement.apply(null,a)}p.displayName="MDXCreateElement"},254:function(e,t,a){"use strict";a.r(t),t.default=a.p+"assets/images/ldm-aws-architecture-9492c50b2ae2e80c0ebfd6c4687c16e1.png"}}]);